{
  "firestore": {
    "rules": "rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    \n    // Regla para la colección de chats\n    match /chat/{message} {\n      allow read: if request.auth != null;\n      allow create: if request.auth != null &&\n                    request.auth.uid == request.resource.data.userId &&\n                    request.auth.token.email == request.resource.data.email;\n    }\n\n    // Regla para la colección de usuarios\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      allow create, update: if request.auth != null &&\n                            request.auth.uid == userId;\n    }\n\n    // Regla para la colección de comentarios\n    match /comments/{commentId} {\n      allow read: if request.auth != null;\n      allow create: if request.auth != null &&\n                    request.auth.uid == request.resource.data.userId;\n    }\n\n    // Regla para la colección de eventos\n    match /events/{eventId} {\n      // Permitir lectura a cualquier usuario autenticado\n      allow read: if request.auth != null;\n\n      // Permitir creación, actualización y eliminación a cualquier usuario autenticado\n      allow create, update, delete: if request.auth != null;\n    }\n\n    // Regla para la colección de chats privados\n    match /private-chat/{chat} {\n      allow read: if request.auth != null && request.auth.uid in resource.data.users;\n      allow create: if request.auth != null && request.auth.uid in request.resource.data.users;\n    }\n\n    // Regla para fotos de perfil\n    match /profilePictures/{userId} {\n      allow read: if request.auth != null;\n      allow create, update: if request.auth != null &&\n                            request.auth.uid == userId;\n    }\n  }\n}"
  },
  "storage": {
    "rules": "rules_version = '2';\n\nservice firebase.storage {\n  match /b/{bucket}/o {\n    // Regla para la colección de eventos\n    match /events/{eventId}/images/{fileName} {\n      // Permitir lectura, creación, actualización y eliminación a cualquier usuario autenticado\n      allow read, create, update, delete: if request.auth != null;\n    }\n\n    // Regla para otros archivos en la raíz\n    match /{filePath=**} {\n      // Permitir lectura, creación, actualización y eliminación a cualquier usuario autenticado\n      allow read, create, update, delete: if request.auth != null;\n    }\n\n    // Regla para la colección de chats\n    match /chat/{message} {\n      allow read, create: if request.auth != null &&\n                            request.auth.uid == request.resource.data.userId &&\n                            request.auth.token.email == request.resource.data.email;\n    }\n\n    // Regla para la colección de usuarios\n    match /users/{userId} {\n      allow read, create, update: if request.auth != null && request.auth.uid == userId;\n    }\n\n    // Regla para la colección de comentarios\n    match /comments/{commentId} {\n      allow read, create: if request.auth != null && request.resource.data.userId == request.auth.uid;\n    }\n\n    // Regla para la colección de chats privados\n    match /private-chat/{chat} {\n      allow read, create: if request.auth != null && request.auth.uid in request.resource.data.users;\n    }\n\n    // Regla para fotos de perfil\n    match /profilePictures/{userId}/{fileName} {\n      allow read, create, update: if request.auth != null && request.auth.uid == userId;\n    }\n  }\n}"
  }
} 